{% extends '::base.html.twig' %}



{% block stylesheets %}
    {{ parent() }}
    {{ form_stylesheet(edit_form) }}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {{ form_javascript(edit_form) }}
{% endblock %}
{% block container %}
    {% include 'ZEBABundle::show_new_location_modal.html.twig' %}

    {{ form_start(edit_form) }}
    {# render the task's only field: description #}
    {{ form_row(edit_form.name) }}
    {{ form_row(edit_form.description) }}
    {{ form_row(edit_form.genres) }}
    {{ form_row(edit_form.musicians) }}
    {{ form_row(edit_form.addresses) }}
    <button class="btn btn-primary" id="btnShowNewLocation" data-target="#largeModal">Add New Address</button>


    <div class="panel"><h5>Band Vacancies</h5>

        {% for bandVacancyAssociation in edit_form.bandVacancyAssociations %}

            <div class="panel-group" >
                <div class="panel panel-default" id="panel{{ bandVacancyAssociation.vars.data.id }}">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" data-target="#collapse{{ bandVacancyAssociation.vars.data.id }}"
                               href="#collapse{{ bandVacancyAssociation.vars.data.id }}">
                                {{ bandVacancyAssociation.vars.data.bandVacancy.name}}
                            </a>
                        </h4>
                    </div>
                    <div id="collapse{{ bandVacancyAssociation.vars.data.id }}" class="panel-collapse collapse in">
                        <div class="panel-body" id="panel-body{{ bandVacancyAssociation.vars.data.id }}">
                           <div>
                            {{ form_row(bandVacancyAssociation.bandVacancy.name) }}

                            {{ form_row(bandVacancyAssociation.bandVacancy.comment) }}
                            {% for genre in bandVacancyAssociation.bandVacancy.genres %}
                               {{ form_row(genre) }}
                            {% endfor %}
                            {% for instrument in bandVacancyAssociation.bandVacancy.instruments %}
                                {{ form_row(instrument) }}
                            {% endfor %}

                           </div>
                        </div>
                    </div>
                </div>

            </div>

        {% endfor %}
    </div>

        {{ form_end(edit_form) }}

<script type="application/javascript">
    var counter=-1;
    {% for bandVacancyAssociation in edit_form.bandVacancyAssociations %}
        counter ++;
        $("#ze_babundle_band_bandVacancyAssociations_"+counter+"_bandVacancy")
            .appendTo($('#panel-body{{ bandVacancyAssociation.vars.data.id }}'));
    {% endfor %}

</script>
{% endblock %}