{% extends '::base.html.twig' %}
{% block head %} {% endblock head %}
{% block body %}
    {% block body_start %}{% endblock body_start %}
    {% block navbar %} {% endblock navbar %}
    {% block pre_container %} {% endblock pre_container %}
    {% block modal_dialog %} {% endblock modal_dialog %}

    {% block fos_user_content %}
        {% if error %}
            <div>{{ error|trans({}, 'FOSUserBundle') }}</div>
        {% endif %}

        <div  id="login_modal">
            <div class="modal-dialog">
        <div class="modal-content">

            <form action="{{ path("fos_user_security_check") }}" method="post" role="form" data-async data-target="#rating-modal" class="text-left">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Login</h4>
                </div>
                <div class="modal-body">
                    {% if error %}
                        <div>Error</div>
                    {% endif %}
                    <input type="hidden" name="_csrf_token" value="{{ csrf_token }}" />
                    <div class="form-group container">
                        <label for="email">Username</label>
                        <input type="text" class="form-control" id="username" name="_username" value="{{ last_username }}" required="required" placeholder="adresse@email.com">
                    </div>
                    <div class="form-group container">
                        <label for="password">Password</label><br />
                        <input type="password" id="password" name="_password" required="required" class="form-control" placeholder="********">
                    </div>
                    <div class="form-group container">
                        <label for="remember_me">
                            <input type="checkbox" id="remember_me" name="_remember_me" value="on" />
                            Remember Me
                        </label>
                    </div>
                </div>
                <p class="text-right"><a href="#">Forgot password?</a></p>
                <p class="pad-25"><button class="btn btn-facebook btn-width-200"><i class="fa fa-facebook"></i> | Connect with Facebook</button></p>
                <p class="pad-25"><button class="btn btn-google-plus btn-width-200"><i class="fa fa-google-plus"></i> | Connect with Google +</button></p>
                <p class="pad-25"><button class="btn btn-twitter btn-width-200"><i class="fa fa-twitter"></i> | Connect with Twitter</button></p>
                <p class="pad-25"><button class="btn btn-github btn-width-200" ><i class="fa fa-github"></i> | Connect with Github</button></p>
                <div class="modal-footer">
                    <a href="#" data-dismiss="modal" class="btn">Close</a>
                    <input type="submit" id="_submit" name="_submit" value="{{ 'security.login.submit'|trans({}, 'FOSUserBundle') }}" />
                </div>
        </div>
        </div>
        </div>
        </form>
        <script>
            $(document).ready(function(){
                $('#_submit').click(function(e){
                    e.preventDefault();
                    console.log( $('form').serialize());
                    $.ajax({
                        type        : $('form').attr( 'method' ),
                        url         : '{{ path("fos_user_security_check") }}',
                        data        : $('form').serialize(),
                        dataType    : "json",
                        success     : function(data, status, object) {
                            if(data.error) {
                                $('.error').html(data.message);
                            }
                            else
                            }
                        },
                        error: function(data, status, object){
                            console.log(data.message);
                        }
                    });
                });
            });
        </script>
    {% endblock fos_user_content %}

    {% block body_end %} {% endblock body_end %}
{% endblock body %}




